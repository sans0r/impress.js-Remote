<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>impress.js | remote presentation framework</title>
    <meta name="description" content="impress.js remote tutorial" />
    <meta name="author" content="Cedric Kleinjung" />
    <link rel="shortcut icon" href="favicon.png" />
    <link href="style.css" rel="stylesheet" />

</head>
<body class="impress-not-supported">
<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>
<div id="impress">
    <div class="step" id="init" data-scale="3">
        <h1>impress.js remote for mobile</h1>
        <p>a short example</p>
        <div class="note">
            only a short start page
        </div>
    </div>
    <div class="step" id="thoughts" data-x="1000" data-y="-2000" data-z="-1000">
        <h1>What if...?</h1>
        <p>
            <ul>
                <li>... you can hold a presentation away from your laptop?</li>
                <li>... control all from your smartphone?</li>
                <li>... doesn't matter what OS?</li>
                <li>... and only one system for that all?</li>
            </ul>
        </p>
        <div class="note">
            <ul>
                <li>You talk about impress.js-Remote</li>
                <li>the first ideas and some other boring stuff</li>
            </ul>
        </div>
    </div>
    <div class="step" id="hear" data-x="-1000" data-y="-1000" data-scale="300">
        <h2>Did you hear about impress.js-Remote?</h2>
    </div>
</div>
<div class="hint">
    <p>Use a spacebar or arrow keys to navigate</p>
</div>
<script>
if ("ontouchstart" in document.documentElement) { 
    document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
}
</script>
<script src="impress.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
// get the IP of the serverIP @ lan, if possible (Linux Server should work fine)
function getIP() {
    var xmlhttp = null;
    var serverIP;
    // Mozilla
    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    }
    // IE
    else if (window.ActiveXObject) {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function(){
        serverIP = this.responseText;
    }
    xmlhttp.open("GET", 'getIP', true);
    xmlhttp.send(null);
    return serverIP;
}
// connect to the server with the own ip (localhost is also possible, but on this way it is modular :D)
var socket = io.connect('http://'+getIP());

// define input event reactions for 'control's
socket.on('control', function(data){
    switch(data){
        // in all sorted cases it's equals: do something and send the return to remotecontrol
        case 'init':
            impress().init();
            // needed because init() send no return from the first step
            socket.emit('slide', impress().goto(0).innerHTML);
            break;
        case 'next':
            socket.emit("slide", impress().next().innerHTML);
            break;
        case 'prev':
            socket.emit("slide", impress().prev().innerHTML);
            break;
        case 'reload':
            // clear clients notesfield
            socket.emit('slide', '');
            // pretty? :)
            window.location = "http://"+window.location.host;
            break;
        default:
            // for step jumps 
            if(data.substr(0,4) == "jump"){
                // remove 'jump' from the control string
                var jumpTarget = data.substr(5);
                socket.emit("slide", impress().goto(parseInt(jumpTarget)-1).innerHTML);
                break;
            }
            // DEBUG
            console.log('aehm...');
    }
});
</script>
<!--
    
    The `impress()` function also gives you access to the API that controls the presentation.
    
    Just store the result of the call:
    
        var api = impress();
    
    and you will get three functions you can call:
    
        `api.init()` - initializes the presentation,
        `api.next()` - moves to next step of the presentation,
        `api.prev()` - moves to previous step of the presentation,
        `api.goto( idx | id | element, [duration] )` - moves the presentation to the step given by its index number
                id or the DOM element; second parameter can be used to define duration of the transition in ms,
                but it's optional - if not provided default transition duration for the presentation will be used.
    
    You can also simply call `impress()` again to get the API, so `impress().next()` is also allowed.
    Don't worry, it wont initialize the presentation again.
    
    For some example uses of this API check the last part of the source of impress.js where the API
    is used in event handlers.
    
-->

</body>
</html>